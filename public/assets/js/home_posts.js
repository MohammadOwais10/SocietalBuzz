{let e=function(){let e=$("#new-post-form");e.submit((function(s){s.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:function(e){let s=t(e.data.post);$("#post-list-container>div").prepend(s),n($(" .delete-post-button",s)),new PostComments(e.data.post._id),new ToggleLike($(" .toggle-like-button",s)),new Noty({theme:"relax",text:"Post published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},t=function(e){return $(`\n      <div class="card m-4" id="post-${e._id}">\n      <div class="card-header"  id="post-header" style="padding:0.5rem 1rem ; height:60px">\n          <div class="d-flex flex-row justify-content-between">\n\n              <div class="d-flex flex-row profile-info">\n                  <h3 class="profile-pic-holder" style="width: 45px; height: 45px; margin: 0px 5px;">\n                  ${e.user.avatar?`<img src="${e.user.avatar}" alt="image" style = "width: 100%;height: 100%; border-radius: 50px;"alt="image">`:'<img src="http:/images/DefaultUser.png" style = "width: 100%;height: 100%; border-radius: 50px;" alt="image">'}                                           \n                  </h3>\n                  <h4 class="text-capitalize profile-name-holder">\n                      ${e.user.name}\n                  </h4>\n              </div>\n              \n              <div class="dropdown dropleft">\n                  <a class="dropdown-toggle" type="button" id="dropdownMenuButton-${e._id}"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                      <i class="fas fa-ellipsis-v"></i>\n                  </a>\n                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-${e._id}">     \n                  <a class="delete-post-button dropdown-item" href="/posts/destroy/${e._id}">Delete</a>   \n                  </div>\n              </div>\n\n          </div>\n      </div>\n\n      <div class="card-body">\n              ${e.postImage?`\n                <div class="posted-image">\n                     <img src="${e.postImage}" alt="post">  \n                </div>\n              `:`\n              <p>\n                <small>\n                     ${e.content}\n                </small>\n                <br>\n             </p>   \n              `}\n      </div>\n     \n      <div class="card-footer text-muted d-flex flex-row">\n            <div class="mx-2">\n              <a class = "toggle-like-button" data-likes = "${e.likes.length}" href="/likes/toggle/?id=${e._id}&type=Post" style="text-decoration: none;">${e.likes.length} <i class="far fa-thumbs-up"></i>\n            </a>  \n    </div>\n\n          <div class="mx-2">\n                  <button class="btn btn-link btn-block" type="button" data-toggle="collapse" \n              data-target="#post-${e._id}-collapse" aria-expanded="true" aria-controls="collapseOne" style="width:140px; text-decoration: none; padding-top: 2px;">\n                  <h4 style="font-size: 1rem; margin-left: -20px;">\n                    <i class="fas fa-comment"></i>\n                     Comments\n                  </h4>\n                  </button>\n              </div>    \n          </div>\n\n              <div id="post-${e._id}-collapse" class="collapse card-footer" aria-labelledby="headingOne">\n                  <div class="card-body">\n\n                      <div>\n                        <form action="/comments/create" method="POST" id="post-${e._id}-comments-form">\n                         <input type="text" name="content" placeholder="Type here to comment">\n                          <input type="hidden" name="post" value="${e._id}">\n                             <input type="submit" value="Add">\n                          </form>\n                      </div> \n                                           \n                      <div class="post-comments-list">\n                          <ul id="post-comments-${e._id}" style="list-style-type: none; padding: 0px;">                 \n                          </ul>\n                      </div>\n\n                  </div>\n              </div>\n    </div>\n      `)},n=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},s=function(){$("#post-list-container>div>div").each((function(){let e=$(this),t=$(" .delete-post-button",e);n(t);let s=e.prop("id").split("-")[1];new PostComments(s)}))};e(),s()}